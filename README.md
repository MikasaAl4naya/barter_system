# Barter System

**Barter System** — это веб-приложение, позволяющее пользователям обмениваться товарами. Пользователи могут размещать объявления о товарах, предлагать обмены и управлять своими предложениями.

## Оглавление

- [Описание](#описание)
- [Технологии](#технологии)
- [Установка и настройка](#установка-и-настройка)
- [Запуск проекта](#запуск-проекта)
- [Автоматическая документация API](#автоматическая-документация-api)
- [Тестирование](#тестирование)
- [Использование](#использование)
- [Важные замечания](#важные-замечания)

---

## Описание

Barter System предоставляет следующие возможности:

- **Размещение объявлений**:  
  Пользователи могут создавать объявления с заголовком, описанием, категорией, состоянием товара и ссылкой на изображение.  
  _Пример_:  
  ```json
  {
    "title": "Старый телефон",
    "description": "Использовался 2 месяца, в отличном состоянии",
    "category": "Electronics",
    "condition": "new",
    "image_url": "https://example.com/image.jpg"
  }
  ```

- **Поиск и фильтрация**:  
  Поиск по ключевым словам в заголовке/описании, фильтрация по категориям и состоянию товара, пагинация.

- **Предложения обмена**:  
  Пользователи могут отправлять предложения на обмен, указывая:  
  - Своё объявление (ad_sender)
  - Объявление получателя (ad_receiver)
  - Комментарий к предложению
  - Статус предложения (ожидает, принято, отклонено)

---

## Технологии

- **Python 3.8+**: Язык программирования.
- **Django 4+**: Веб-фреймворк для серверной части.
- **Django REST Framework**: Для создания API.
- **SQLite**: База данных
- **Bootstrap**: Для визуального оформления интерфейса.

---

## Установка и настройка

### 1. Клонирование репозитория
```bash
git clone https://github.com/MikasaAl4naya/barter_system.git
cd barter_system
```

### 2. Создание и активация виртуального окружения
Для Windows:
```bash
python -m venv .venv
.\.venv\Scripts\activate
```

### 3. Установка зависимостей
```bash
pip install -r requirements.txt
```

### 4. Применение миграций
```bash
python manage.py makemigrations
python manage.py migrate
```

### 5. Создание суперпользователя
```bash
python manage.py createsuperuser
```

### 6. Настройка статических файлов
- Соберите статику перед запуском:
  ```bash
  python manage.py collectstatic
  ```

---

## Запуск проекта

### Запуск сервера разработки
```bash
python manage.py runserver
```

### Доступ к приложению
- **Основной интерфейс**: [http://127.0.0.1:8000/](http://127.0.0.1:8000/)
- **Административная панель**: [http://127.0.0.1:8000/admin/](http://127.0.0.1:8000/admin/)
- **API документация**: [http://127.0.0.1:8000/api/docs/](http://127.0.0.1:8000/api/docs/) 


## Тестирование

Чтобы запустить тесты:
```bash
python manage.py test
```

**Текущие тесты покрывают:**
- Создание, редактирование и удаление объявлений
- Фильтрацию и пагинацию
- Обработку предложений обмена
- Проверку прав доступа

---

## Использование

### Создание объявления
POST-запрос на `/api/ads/` с данными:
```json
{
  "title": "Название товара",
  "description": "Описание товара",
  "category": "Electronics",
  "condition": "new",
  "image_url": "https://example.com/image.jpg"
}
```

### Получение списка объявлений
GET-запрос на `/api/ads/` с параметрами:
- `search` — поисковый запрос
- `category` — фильтр по категории
- `condition` — фильтр по состоянию
- `sort` — сортировка 

### Создание предложения обмена
POST-запрос на `/api/proposals/` с данными:
```json
{
  "ad_sender": 1,
  "ad_receiver": 2,
  "comment": "Хочу обменять на ваш ноутбук",
  "status": "pending"
}
```
